
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Basics of Child Processes Â· COMP321: Introduction to Computer Systems</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Gabriel Vacaliuc">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="signals.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Exceptional Control Flow
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.1" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    Basics of Child Processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="signals.html">
            
                <a href="signals.html">
            
                    
                    Signals
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Basics of Child Processes</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="basics-of-ecf-and-child-processes">Basics of ECF and Child Processes</h1>
<h3 id="reaping-zombie-processes">Reaping Zombie Processes:</h3>
<p>After forking and launching a child, the parent needs to keep track of the
children.  After the child terminates, the parent must reap the finished
process, otherwise it uses system resources.  If the parent exits, the child&apos;s
parent is then updated to the init process by the OS, which will then remove
it.</p>
<p>How to reap? A simple way is for the parent to simply <code>wait</code> on the child:</p>
<pre><code class="lang-c">
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
        <span class="hljs-keyword">int</span> pid;
        <span class="hljs-keyword">if</span> ((pid = fork()) == <span class="hljs-number">0</span>) {
                <span class="hljs-comment">/* Child */</span>
                <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">/* Parent waits on child */</span>
                wait();
        }
}
</code></pre>
<h3 id="loading-and-running-programs">Loading and Running Programs</h3>
<p>After forking, the child is simply running the exact code as the parent.  To fork and
run new programs, we use <code>execve</code>:</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">execve</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *filename, <span class="hljs-keyword">char</span> *argv[], <span class="hljs-keyword">char</span> *envp)</span></span>;
</code></pre>
<ul>
<li><code>filename</code>: path to object or script file</li>
<li><code>argv</code> argument list (<code>argv[0] == filename</code>)</li>
<li><code>envp</code> environment variable list</li>
</ul>
<p>Notes on <code>execve</code>:</p>
<ul>
<li>complete overrites code, data, and stack</li>
<li>retains PID</li>
</ul>
<p>Why have two separate commands for forking and running a program?</p>
<ul>
<li>allows us to run code in child process before making call to <code>execve</code></li>
<li>specifically, it allows us to block certain signals from the OS</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Exceptional Control Flow">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="signals.html" class="navigation navigation-next " aria-label="Next page: Signals">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Basics of Child Processes","level":"1.2.1","depth":2,"next":{"title":"Signals","level":"1.2.2","depth":2,"path":"exceptional-control-flow/signals.md","ref":"./exceptional-control-flow/signals.md","articles":[]},"previous":{"title":"Exceptional Control Flow","level":"1.2","depth":1,"path":"exceptional-control-flow/README.md","ref":"./exceptional-control-flow/README.md","articles":[{"title":"Basics of Child Processes","level":"1.2.1","depth":2,"path":"exceptional-control-flow/basics.md","ref":"./exceptional-control-flow/basics.md","articles":[]},{"title":"Signals","level":"1.2.2","depth":2,"path":"exceptional-control-flow/signals.md","ref":"./exceptional-control-flow/signals.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["katex","edit-link"],"root":"src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"edit-link":{"label":"edit","base":"https://github.com/rice-notes/comp321-sp18/tree/master/src"},"katex":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Gabriel Vacaliuc","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"COMP321: Introduction to Computer Systems","gitbook":"*","description":"Notes from the Spring 2018 offering of STAT321 at Rice University."},"file":{"path":"exceptional-control-flow/basics.md","mtime":"2018-03-20T09:57:26.063Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-20T09:58:31.193Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

